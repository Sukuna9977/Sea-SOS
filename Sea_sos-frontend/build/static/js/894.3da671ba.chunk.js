"use strict";(self.webpackChunkseasos=self.webpackChunkseasos||[]).push([[894],{8619:function(n,e,s){s(2791);var r=s(184),t=function(n){return(0,r.jsxs)("div",{className:"card ".concat(n.className?n.className:""),children:[" ",n.children," "]})};t.Header=function(n){return(0,r.jsxs)("div",{className:"card-header d-flex justify-content-between ".concat(n.className?n.className:""),children:[" ",n.children," "]})},t.Body=function(n){return(0,r.jsxs)("div",{className:"card-body ".concat(n.className?n.className:""),children:[" ",n.children," "]})},t.Footer=function(n){return(0,r.jsxs)("div",{className:"card-footer",children:[" ",n.children," "]})},t.Header.Title=function(n){return(0,r.jsxs)("div",{className:"header-title ".concat(n.className?n.className:""),children:[" ",n.children," "]})},t.Header.Action=function(n){return(0,r.jsxs)("div",{className:"header-action ".concat(n.className?n.className:""),children:[" ",n.children," "]})},e.Z=t},4597:function(n,e,s){s.d(e,{Vp:function(){return o},j3:function(){return a},sD:function(){return d}});var r=s(4165),t=s(5861),c=s(1830),i=s.n(c),l=s(1237),a=function(n,e){i().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var s=(0,t.Z)((0,r.Z)().mark((function s(t){var c;return(0,r.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t.isConfirmed){s.next=6;break}return s.next=3,(0,l.SR)(n);case 3:c=s.sent,e(),i().fire("Deleted!",c.message,"success");case 6:case"end":return s.stop()}}),s)})));return function(n){return s.apply(this,arguments)}}())},o=function(n){i().fire("Success !",n,"success")},d=function(n){i().fire("Error !",n,"error")}},8830:function(n,e){var s={BACKEND_URL:{NODE_ENV:"production",PUBLIC_URL:"/hope-ui/react/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL||"http://localhost:3030"};e.Z=s},1237:function(n,e,s){s.d(e,{SR:function(){return c},rQ:function(){return i}});var r=s(4165),t=s(5861),c=function(){var n=(0,t.Z)((0,r.Z)().mark((function n(e){var s,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"DELETE"});case 2:return s=n.sent,n.next=5,s.json();case 5:return t=n.sent,n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),i=function(){var n=(0,t.Z)((0,r.Z)().mark((function n(e){var s,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return s=n.sent,n.next=5,s.json();case 5:return t=n.sent,n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},215:function(n,e,s){s.r(e),s.d(e,{default:function(){return B}});var r=s(3433),t=s(4165),c=s(5861),i=s(9439),l=s(2791),a=s(8619),o=s(5316),d=s(2592),h=s(9743),u=s(2677),A=s(2591),j=s(3360),x=s(1570),D=s(6144),v=s(7612),T=s(6293),f=s(6042),p=s(9961),g=s(7626),S=(s(3666),s(8559)),z=s.n(S),m=s(8830),w=s(1243),y=s(1237),O=s(184),Z=function(n){n.selectedItem;var e=n.onAssignMission,s=(n.setShowPatrolList,(0,l.useState)(!1)),r=(0,i.Z)(s,2),t=r[0],c=r[1],d=(0,l.useState)(null),A=(0,i.Z)(d,2),x=A[0],D=A[1],v=(0,l.useState)([]),T=(0,i.Z)(v,2),f=T[0],p=T[1],g={standby:{backgroundColor:"green",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"},on_mission:{backgroundColor:"blue",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"},off_duty:{backgroundColor:"red",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"}},S=function(){return c(!1)};(0,l.useEffect)((function(){(0,y.rQ)("".concat(m.Z.BACKEND_URL,"/api/patrols/"),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then((function(n){p(n)}))}),[]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{children:(0,O.jsx)(h.Z,{children:(0,O.jsx)(u.Z,{sm:"12",children:(0,O.jsxs)(a.Z,{children:[(0,O.jsx)(a.Z.Header,{className:"d-flex justify-content-between",children:(0,O.jsx)("div",{className:"header-title",children:(0,O.jsx)("h4",{className:"card-title",children:"Patrol List"})})}),(0,O.jsx)(a.Z.Body,{className:"px-0",children:(0,O.jsx)("div",{className:"table-responsive",children:(0,O.jsxs)("table",{id:"patrol-list-table",className:"table table-striped",role:"grid","data-toggle":"data-table",children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{className:"light",children:[(0,O.jsx)("th",{children:"Supervisor Name"}),(0,O.jsx)("th",{children:"Email"}),(0,O.jsx)("th",{children:"Status"}),(0,O.jsx)("th",{children:"Location"}),(0,O.jsx)("th",{children:"Team Members"}),(0,O.jsx)("th",{children:"Action"})]})}),(0,O.jsx)("tbody",{children:f.map((function(n,e){return(0,O.jsxs)("tr",{children:[(0,O.jsx)("td",{children:n.supervisor.name}),(0,O.jsx)("td",{children:n.supervisor.email}),(0,O.jsxs)("td",{children:[(0,O.jsx)("div",{style:g[n.status]}),n.status]}),(0,O.jsx)("td",{children:n.location}),(0,O.jsx)("td",{children:n.teamMembers.join(", ")}),(0,O.jsx)("td",{children:(0,O.jsx)(j.Z,{onClick:function(){D(n),c(!0)},className:"btn btn-sm btn-primary",children:"Assign"})})]},e)}))})]})})})]})})})}),(0,O.jsxs)(o.Z,{show:t,onHide:S,size:"lg",children:[(0,O.jsx)(o.Z.Header,{closeButton:!0,children:(0,O.jsx)(o.Z.Title,{children:"Assign Patrol"})}),(0,O.jsx)(o.Z.Body,{children:x?(0,O.jsxs)("div",{children:[(0,O.jsxs)("h5",{children:["Supervisor Name: ",x.supervisor.name]}),(0,O.jsxs)("p",{children:["Email: ",x.supervisor.email]}),(0,O.jsxs)("p",{children:["Status: ",x.status]}),(0,O.jsxs)("p",{children:["Location: ",x.location]}),(0,O.jsxs)("p",{children:["Team Members: ",x.teamMembers.join(", ")]})]}):(0,O.jsx)("p",{children:"No details available."})}),(0,O.jsxs)(o.Z.Footer,{children:[(0,O.jsx)(j.Z,{variant:"secondary",onClick:S,children:"Close"}),(0,O.jsx)(j.Z,{variant:"primary",onClick:function(){x&&e&&(e(x._id),S())},children:"Confirm Assignment"})]})]})]})},C=s(4597),k=(s(2504),function(n){var e=n.refresh,s=n.markers,a=n.setMarkers,h=(0,l.useState)(!1),u=(0,i.Z)(h,2),A=u[0],j=u[1],x=(0,l.useState)({}),D=(0,i.Z)(x,2),p=D[0],g=D[1],S=(0,T.Sx)(),y=function(){var n=(0,c.Z)((0,t.Z)().mark((function n(e){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("number"!==typeof e.lat||"number"!==typeof e.lng){n.next=6;break}return n.next=3,Z(e);case 3:j(!0),n.next=7;break;case 6:console.error("Invalid latlng:",e);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Z=function(){var n=(0,c.Z)((0,t.Z)().mark((function n(e){var s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.Z.get("/api/urgences/find-urgence/".concat(e.lng,"/").concat(e.lat),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});case 3:s=n.sent,console.log("API Response:",s.data),g(s.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error("Failed to fetch urgence data:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}();(0,l.useEffect)((function(){var n=v.io.connect(m.Z.BACKEND_URL);return n.on("notification",(function(n){var s=[n.urgence.longitude,n.urgence.latitude];a((function(n){return[].concat((0,r.Z)(n),[s])})),z().circle(s,{radius:5e3,color:"red"}).addTo(S),e()})),n.on("refresh",function(){var n=(0,c.Z)((0,t.Z)().mark((function n(s){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return n.next=4,Z(s.data);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),function(){return n.disconnect()}}),[e,a,S,Z]);var C=z().icon({iconUrl:"data:image/png;base64,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",iconSize:[25,41],iconAnchor:[12,41]});return z().Marker.prototype.options.icon=C,(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(o.Z,{show:A,onHide:function(){return j(!1)},backdrop:"static",keyboard:!1,centered:!0,size:"lg",children:[(0,O.jsx)(o.Z.Header,{closeButton:!0,children:(0,O.jsx)(o.Z.Title,{children:"Urgence"})}),(0,O.jsx)(o.Z.Body,{children:(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[(0,O.jsxs)("div",{style:{backgroundColor:"lightgrey",width:"fit-content",padding:"10px"},children:[(0,O.jsx)("h3",{children:"Latitude"}),(0,O.jsx)("h5",{children:p.longitude}),(0,O.jsx)("h3",{children:"Longitude"}),(0,O.jsx)("h5",{children:p.latitude}),(0,O.jsx)("h5",{children:"Phone number"}),(0,O.jsx)("p",{children:p.tel}),(0,O.jsx)("p",{children:p.nomprenom}),(0,O.jsx)("h5",{children:"Age"}),(0,O.jsx)("p",{children:p.age}),(0,O.jsx)("h5",{children:"Starting point"}),(0,O.jsx)("p",{children:p.depart}),(0,O.jsx)("h5",{children:"Level of emergency"}),(0,O.jsx)("p",{children:p.niveau}),(0,O.jsx)("h5",{children:"Other informations"}),(0,O.jsx)("p",{children:p.other})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("h5",{children:"Type of emergency"}),(0,O.jsx)("p",{children:p.type}),(0,O.jsx)("h5",{children:"Boat size"}),(0,O.jsx)("p",{children:p.taille}),(0,O.jsx)("h5",{children:"Number of person"}),(0,O.jsx)("p",{children:p.nbrpersonne}),(0,O.jsx)("h5",{children:"Status"}),(0,O.jsx)("p",{children:p.status}),(0,O.jsx)("h5",{children:"Distance traveled"}),(0,O.jsx)("p",{children:p.distance}),(0,O.jsx)("h5",{children:"Communication"}),(0,O.jsx)("p",{children:p.communication}),(0,O.jsx)("h5",{children:"Police"}),(0,O.jsx)("p",{children:p.police}),(0,O.jsx)(d.Z,{src:"",alt:"Urgence"})]})]})}),(0,O.jsx)(o.Z.Footer,{})]}),s.map((function(n,e){return(0,O.jsx)(f.J,{position:[n[0],n[1]],eventHandlers:{click:function(n){return y(n.latlng)}}},e)}))]})}),B=function(){var n=(0,l.useState)(!1),e=(0,i.Z)(n,2),s=e[0],r=e[1],d=(0,l.useState)(null),v=(0,i.Z)(d,2),T=v[0],f=v[1],S=(0,l.useState)([]),z=(0,i.Z)(S,2),y=z[0],B=z[1],N=(0,l.useState)(null),b=(0,i.Z)(N,2),H=b[0],P=b[1],E=(0,l.useState)(null),L=(0,i.Z)(E,2),M=L[0],I=L[1],R=(0,l.useState)(null),J=(0,i.Z)(R,2),Q=J[0],G=J[1],F=(0,l.useState)("All"),U=(0,i.Z)(F,2),Y=U[0],K=U[1],W=(0,l.useState)([]),V=(0,i.Z)(W,2),X=V[0],q=V[1],_=function(){var n=new URLSearchParams;"All"!==Y&&n.set("cloture",Y),H&&"All"!==H&&n.set("depart",H),M&&"All"!==M&&n.set("status",M),Q&&"All"!==Q&&n.set("niveau",Q),w.Z.get("".concat(m.Z.BACKEND_URL,"/api/urgences/find-all?").concat(n.toString())).then((function(n){console.log("Marker data:",n.data),B(n.data),q(n.data.map((function(n){return[n.latitude,n.longitude]})))})).catch((function(n){console.error("Error fetching urgences:",n)}))};(0,l.useEffect)((function(){_()}),[H,M,Y,Q]);var $=function(){var n=(0,c.Z)((0,t.Z)().mark((function n(e){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(T){n.next=3;break}return(0,C.sD)("No mission selected"),n.abrupt("return");case 3:return n.prev=3,n.next=6,w.Z.post("".concat(m.Z.BACKEND_URL,"/api/patrols/assign/").concat(e,"/").concat(T._id));case 6:200===n.sent.status?((0,C.Vp)("Mission assigned successfully!"),r(!1),_()):(0,C.sD)("Failed to assign mission"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),n.t0.response&&409===n.t0.response.status?(0,C.sD)("This mission has already been assigned to this patrol."):(0,C.sD)("Failed to assign mission"),console.error("Error in assigning mission:",n.t0);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}();return(0,O.jsxs)("div",{children:[(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(u.Z,{sm:"12",children:(0,O.jsxs)(a.Z,{children:[(0,O.jsx)(a.Z.Header,{className:"d-flex justify-content-between",children:(0,O.jsx)("h4",{className:"card-title",children:"Map"})}),(0,O.jsx)(a.Z.Body,{children:(0,O.jsxs)(p.h,{center:[36.96021,10.319944],zoom:5,style:{width:"100%",height:"520px"},children:[(0,O.jsx)(g.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,O.jsx)(k,{refresh:_,markers:X,setMarkers:q})]})})]})}),(0,O.jsx)(u.Z,{sm:"12",children:(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(u.Z,{sm:"8",children:(0,O.jsxs)(a.Z,{children:[(0,O.jsx)(a.Z.Header,{className:"d-flex justify-content-between",children:(0,O.jsx)("h4",{className:"card-title",children:"SOS"})}),(0,O.jsx)(a.Z.Body,{children:(0,O.jsx)("div",{className:"bd-example table-responsive",children:(0,O.jsxs)(A.Z,{className:"table table-hover",children:[(0,O.jsx)("thead",{children:(0,O.jsxs)("tr",{children:[(0,O.jsx)("th",{scope:"col",children:"Lng & lat"}),(0,O.jsx)("th",{scope:"col",children:"Type"}),(0,O.jsx)("th",{scope:"col",children:"Level"}),(0,O.jsx)("th",{scope:"col",children:"Status"}),(0,O.jsx)("th",{scope:"col",children:"Assign"})]})}),(0,O.jsx)("tbody",{children:y.map((function(n,e){return(0,O.jsxs)("tr",{children:[(0,O.jsxs)("td",{children:[n.longitude,", ",n.latitude]}),(0,O.jsx)("td",{children:n.type}),(0,O.jsx)("td",{children:n.niveau}),(0,O.jsx)("td",{children:n.status}),(0,O.jsx)("td",{children:(0,O.jsx)(j.Z,{onClick:function(){return function(n){f(n),r(!0)}(n)},children:"Assign to Patrol"})})]},e)}))})]})})})]})}),(0,O.jsx)(u.Z,{sm:"4",children:(0,O.jsxs)(a.Z,{children:[(0,O.jsx)(a.Z.Header,{className:"d-flex justify-content-between",children:(0,O.jsx)("h4",{className:"card-title",children:"Filters"})}),(0,O.jsx)(a.Z.Body,{children:(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:"row filter",children:[(0,O.jsx)("div",{className:"col-sm-4",children:(0,O.jsx)("label",{children:"Emergency starting point:"})}),(0,O.jsx)("div",{className:"col-sm-8",children:(0,O.jsxs)(x.Z,{as:D.Z,children:[(0,O.jsx)(j.Z,{variant:"primary",children:H||"All"}),(0,O.jsx)(x.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,O.jsx)(x.Z.Menu,{children:["All","la Goulette","Rad\xe8s","Sousse","Gab\xe8s","Zarzis","Sfax"].map((function(n,e){return(0,O.jsx)(x.Z.Item,{onClick:function(){return P(n)},children:n},e)}))})]})})]}),(0,O.jsxs)("div",{className:"row filter",children:[(0,O.jsx)("div",{className:"col-sm-4",children:(0,O.jsx)("label",{children:"Emergency level:"})}),(0,O.jsx)("div",{className:"col-sm-8",children:(0,O.jsxs)(x.Z,{as:D.Z,children:[(0,O.jsx)(j.Z,{variant:"primary",children:Q||"All"}),(0,O.jsx)(x.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,O.jsx)(x.Z.Menu,{children:["All",1,2,3,4,5].map((function(n,e){return(0,O.jsx)(x.Z.Item,{onClick:function(){return G(n)},children:n},e)}))})]})})]}),(0,O.jsxs)("div",{className:"row filter",children:[(0,O.jsx)("div",{className:"col-sm-4",children:(0,O.jsx)("label",{children:"Emergency status:"})}),(0,O.jsx)("div",{className:"col-sm-8",children:(0,O.jsxs)(x.Z,{as:D.Z,children:[(0,O.jsx)(j.Z,{variant:"primary",children:M||"All"}),(0,O.jsx)(x.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,O.jsx)(x.Z.Menu,{children:["All","Unconscious","Critical condition","Injured","Difficulty breathing","Severe bleeding","Choking","Cardiac arrest","Allergic reaction","Overdose"].map((function(n,e){return(0,O.jsx)(x.Z.Item,{onClick:function(){return I(n)},children:n},e)}))})]})})]}),(0,O.jsxs)("div",{className:"row filter",children:[(0,O.jsx)("div",{className:"col-sm-4",children:(0,O.jsx)("label",{children:"Enclosed:"})}),(0,O.jsx)("div",{className:"col-sm-8",children:(0,O.jsxs)(x.Z,{as:D.Z,children:[(0,O.jsx)(j.Z,{variant:"primary",children:Y}),(0,O.jsx)(x.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,O.jsxs)(x.Z.Menu,{children:[(0,O.jsx)(x.Z.Item,{onClick:function(){return K("All")},children:"All"}),(0,O.jsx)(x.Z.Item,{onClick:function(){return K("open")},children:"open"}),(0,O.jsx)(x.Z.Item,{onClick:function(){return K("close")},children:"close"})]})]})})]}),(0,O.jsx)("div",{className:"row filter",children:(0,O.jsx)("div",{className:"col-sm-12 d-flex justify-content-center",children:(0,O.jsx)(j.Z,{onClick:_,children:"Filter"})})})]})})]})})]})})]}),(0,O.jsxs)(o.Z,{show:s,onHide:function(){return r(!1)},backdrop:"static",keyboard:!1,centered:!0,size:"lg",children:[(0,O.jsx)(o.Z.Header,{closeButton:!0,children:(0,O.jsx)(o.Z.Title,{children:"Assign Patrol"})}),(0,O.jsx)(o.Z.Body,{children:(0,O.jsx)(Z,{selectedItem:T,setShowPatrolList:r,onAssignMission:$})})]}),(0,O.jsx)(h.Z,{children:(0,O.jsx)(u.Z,{children:(0,O.jsx)(a.Z,{})})})]})}}}]);
//# sourceMappingURL=894.3da671ba.chunk.js.map