"use strict";(self.webpackChunkseasos=self.webpackChunkseasos||[]).push([[147],{7411:function(e,r,o){var s=o(1243),a=o(8830),n=s.Z.create({baseURL:a.Z.BACKEND_URL});n.interceptors.request.use((function(e){var r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}),(function(e){return Promise.reject(e)})),r.Z=n},5147:function(e,r,o){o.r(r),o.d(r,{default:function(){return x}});var s=o(4165),a=o(5861),n=o(4942),t=o(1413),i=o(9439),l=o(2791),c=o(5316),d=o(2592),u=o(4292),m=o(717),p=o(3360),v=o(8160),f=o(7411),h=o(4597),Z=(o(8830),function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r,o){var a,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("submit button called  "),a={supervisor:r.supervisor,status:r.status,location:r.location,teamMembers:Array.isArray(r.teamMembers)?r.teamMembers:r.teamMembers.split(",").map((function(e){return e.trim()})),assignedMissions:r.assignedMissions},e.prev=2,console.log("Received data:",r),"create"!==o){e.next=10;break}return e.next=7,f.Z.post("/api/patrols/create",a);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,f.Z.put("/api/patrols/update/".concat(r._id),a);case 12:e.t0=e.sent;case 13:n=e.t0,(0,h.Vp)(n.data.message),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),(0,h.sD)(e.t1.response.data.message);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(r,o){return e.apply(this,arguments)}}()),b=o(184),x=function(e){var r,o,f,h,x=e.refresh,g=e.handleClose,y=(e.handleShow,e.show),j=e.mode,N=e.patrolToEdit,w=(0,l.useState)({_id:N._id||"",supervisor:{name:(null===(r=N.supervisor)||void 0===r?void 0:r.name)||"",email:(null===(o=N.supervisor)||void 0===o?void 0:o.email)||"",password:(null===(f=N.supervisor)||void 0===f?void 0:f.password)||"",rank:(null===(h=N.supervisor)||void 0===h?void 0:h.rank)||""},status:N.status||"",location:N.location||"",teamMembers:Array.isArray(N.teamMembers)?N.teamMembers.join(", "):N.teamMembers||"",assignedMissions:N.assignedMissions||[]}),C=(0,i.Z)(w,2),k=C[0],E=C[1],M=function(e){var r=e.target,o=r.name,s=r.value;o.startsWith("supervisor.")?E((function(e){return(0,t.Z)((0,t.Z)({},e),{},{supervisor:(0,t.Z)((0,t.Z)({},e.supervisor),{},(0,n.Z)({},o.split(".")[1],s))})})):E((0,t.Z)((0,t.Z)({},k),{},(0,n.Z)({},o,s)))},S=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r){var o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),o=(0,t.Z)((0,t.Z)({},k),{},{teamMembers:k.teamMembers.split(",").map((function(e){return e.trim()}))}),e.next=4,Z(o,j);case 4:g(),x();case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e,r,o,s;E({_id:N._id||"",supervisor:{name:(null===(e=N.supervisor)||void 0===e?void 0:e.name)||"",email:(null===(r=N.supervisor)||void 0===r?void 0:r.email)||"",password:(null===(o=N.supervisor)||void 0===o?void 0:o.password)||"",rank:(null===(s=N.supervisor)||void 0===s?void 0:s.rank)||""},status:N.status||"",location:N.location||"",teamMembers:Array.isArray(N.teamMembers)?N.teamMembers.join(", "):N.teamMembers||"",assignedMissions:N.assignedMissions||[]})}),[N]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{children:(0,b.jsx)(c.Z,{show:y,onHide:g,centered:!0,backdrop:"static",keyboard:!1,size:"lg",children:(0,b.jsxs)("form",{encType:"multipart/form-data",onSubmit:S,children:[(0,b.jsx)(c.Z.Header,{closeButton:!0,children:"create"===j?(0,b.jsx)(c.Z.Title,{children:"Add new patrol"}):(0,b.jsx)(c.Z.Title,{children:"Edit patrol"})}),(0,b.jsx)(c.Z.Body,{children:(0,b.jsx)("div",{className:"new-patrol-info",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"profile-img-edit position-relative col-md-2 mb-4",children:(0,b.jsx)(d.Z,{className:"lazyload theme-color-yellow-img profile-pic rounded avatar-100",src:v,alt:"profile-pic"})}),(0,b.jsx)(u.Z,{type:"hidden",name:"_id",value:k._id,onChange:M}),(0,b.jsxs)(m.Z.Group,{className:"col-md-10 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"supervisorName",children:"Supervisor Name:"}),(0,b.jsx)(m.Z.Control,{value:k.supervisor.name,onChange:M,type:"text",id:"supervisorName",name:"supervisor.name",placeholder:"Supervisor Name",required:!0})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-6 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"supervisorEmail",children:"Supervisor Email:"}),(0,b.jsx)(m.Z.Control,{value:k.supervisor.email,onChange:M,type:"email",name:"supervisor.email",id:"supervisorEmail",placeholder:"Supervisor Email",required:!0})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-6 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"supervisorPassword",children:"Supervisor Password:"}),(0,b.jsx)(m.Z.Control,{type:"password",value:k.supervisor.password,onChange:M,name:"supervisor.password",id:"supervisorPassword",placeholder:"Supervisor Password",required:!0})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-6 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"supervisorRank",children:"Supervisor Rank:"}),(0,b.jsx)(m.Z.Control,{value:k.supervisor.rank,onChange:M,type:"text",name:"supervisor.rank",id:"supervisorRank",placeholder:"Supervisor Rank",required:!0})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-6 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"status",children:"Status:"}),(0,b.jsxs)("select",{name:"status",value:k.status,onChange:M,id:"status",className:"selectpicker form-control","data-style":"py-0",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select status"}),(0,b.jsx)("option",{value:"standby",children:"Standby"}),(0,b.jsx)("option",{value:"on_mission",children:"On Mission"}),(0,b.jsx)("option",{value:"off_duty",children:"Off Duty"})]})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-12 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"location",children:"Location:"}),(0,b.jsx)(m.Z.Control,{value:k.location,onChange:M,type:"text",name:"location",id:"location",placeholder:"Location",required:!0})]}),(0,b.jsxs)(m.Z.Group,{className:"col-md-12 form-group",children:[(0,b.jsx)(m.Z.Label,{htmlFor:"teamMembers",children:"Team Members:"}),(0,b.jsx)(m.Z.Control,{value:k.teamMembers,onChange:M,type:"text",name:"teamMembers",id:"teamMembers",placeholder:"Team Members (comma-separated)",required:!0})]})]})})}),(0,b.jsxs)(c.Z.Footer,{children:[(0,b.jsx)(p.Z,{type:"button",variant:"secondary",onClick:g,children:"Close"}),(0,b.jsx)(p.Z,{type:"submit",variant:"primary",children:"Save Changes"})]})]})})})})}},2592:function(e,r,o){var s=o(1413),a=o(5987),n=o(1694),t=o.n(n),i=o(2791),l=o(2007),c=o.n(l),d=o(162),u=o(184),m=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(c().string,c().bool,c().bool,c().bool,c().bool,i.forwardRef((function(e,r){var o=e.bsPrefix,n=e.className,i=e.fluid,l=void 0!==i&&i,c=e.rounded,p=void 0!==c&&c,v=e.roundedCircle,f=void 0!==v&&v,h=e.thumbnail,Z=void 0!==h&&h,b=(0,a.Z)(e,m);return o=(0,d.vE)(o,"img"),(0,u.jsx)("img",(0,s.Z)((0,s.Z)({ref:r},b),{},{className:t()(n,l&&"".concat(o,"-fluid"),p&&"rounded",f&&"rounded-circle",Z&&"".concat(o,"-thumbnail"))}))})));p.displayName="Image",r.Z=p},5316:function(e,r,o){o.d(r,{Z:function(){return z}});var s,a=o(9439),n=o(5987),t=o(1413),i=o(1694),l=o.n(i),c=o(3070),d=o(7357),u=o(8376),m=o(6382);function p(e){if((!s&&0!==s||e)&&d.Z){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),s=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return s}var v=o(8633),f=o(9007),h=o(3201),Z=o(1683),b=o(3690),x=o(2791),g=o(2121),y=o(5592),j=o(2709),N=o(6543),w=(0,N.Z)("modal-body"),C=o(9820),k=o(162),E=o(184),M=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],S=x.forwardRef((function(e,r){var o=e.bsPrefix,s=e.className,a=e.contentClassName,i=e.centered,c=e.size,d=e.fullscreen,u=e.children,m=e.scrollable,p=(0,n.Z)(e,M);o=(0,k.vE)(o,"modal");var v="".concat(o,"-dialog"),f="string"===typeof d?"".concat(o,"-fullscreen-").concat(d):"".concat(o,"-fullscreen");return(0,E.jsx)("div",(0,t.Z)((0,t.Z)({},p),{},{ref:r,className:l()(v,s,c&&"".concat(o,"-").concat(c),i&&"".concat(v,"-centered"),m&&"".concat(v,"-scrollable"),d&&f),children:(0,E.jsx)("div",{className:l()("".concat(o,"-content"),a),children:u})}))}));S.displayName="ModalDialog";var F=S,R=(0,N.Z)("modal-footer"),T=o(8024),A=["bsPrefix","className","closeLabel","closeButton"],L=x.forwardRef((function(e,r){var o=e.bsPrefix,s=e.className,a=e.closeLabel,i=void 0===a?"Close":a,c=e.closeButton,d=void 0!==c&&c,u=(0,n.Z)(e,A);return o=(0,k.vE)(o,"modal-header"),(0,E.jsx)(T.Z,(0,t.Z)((0,t.Z)({ref:r},u),{},{className:l()(s,o),closeLabel:i,closeButton:d}))}));L.displayName="ModalHeader";var P=L,D=(0,o(7472).Z)("h4"),_=(0,N.Z)("modal-title",{Component:D}),O=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function B(e){return(0,E.jsx)(j.Z,(0,t.Z)((0,t.Z)({},e),{},{timeout:null}))}function H(e){return(0,E.jsx)(j.Z,(0,t.Z)((0,t.Z)({},e),{},{timeout:null}))}var q=x.forwardRef((function(e,r){var o=e.bsPrefix,s=e.className,i=e.style,j=e.dialogClassName,N=e.contentClassName,w=e.children,M=e.dialogAs,S=void 0===M?F:M,R=e["aria-labelledby"],T=e["aria-describedby"],A=e["aria-label"],L=e.show,P=void 0!==L&&L,D=e.animation,_=void 0===D||D,q=e.backdrop,z=void 0===q||q,I=e.keyboard,G=void 0===I||I,K=e.onEscapeKeyDown,U=e.onShow,W=e.onHide,V=e.container,J=e.autoFocus,Q=void 0===J||J,X=e.enforceFocus,Y=void 0===X||X,$=e.restoreFocus,ee=void 0===$||$,re=e.restoreFocusOptions,oe=e.onEntered,se=e.onExit,ae=e.onExiting,ne=e.onEnter,te=e.onEntering,ie=e.onExited,le=e.backdropClassName,ce=e.manager,de=(0,n.Z)(e,O),ue=(0,x.useState)({}),me=(0,a.Z)(ue,2),pe=me[0],ve=me[1],fe=(0,x.useState)(!1),he=(0,a.Z)(fe,2),Ze=he[0],be=he[1],xe=(0,x.useRef)(!1),ge=(0,x.useRef)(!1),ye=(0,x.useRef)(null),je=(0,v.Z)(),Ne=(0,a.Z)(je,2),we=Ne[0],Ce=Ne[1],ke=(0,h.Z)(r,Ce),Ee=(0,f.Z)(W),Me=(0,k.SC)();o=(0,k.vE)(o,"modal");var Se=(0,x.useMemo)((function(){return{onHide:Ee}}),[Ee]);function Fe(){return ce||(0,y.t)({isRTL:Me})}function Re(e){if(d.Z){var r=Fe().getScrollbarWidth()>0,o=e.scrollHeight>(0,u.Z)(e).documentElement.clientHeight;ve({paddingRight:r&&!o?p():void 0,paddingLeft:!r&&o?p():void 0})}}var Te=(0,f.Z)((function(){we&&Re(we.dialog)}));(0,Z.Z)((function(){(0,m.Z)(window,"resize",Te),null==ye.current||ye.current()}));var Ae=function(){xe.current=!0},Le=function(e){xe.current&&we&&e.target===we.dialog&&(ge.current=!0),xe.current=!1},Pe=function(){be(!0),ye.current=(0,b.Z)(we.dialog,(function(){be(!1)}))},De=function(e){"static"!==z?ge.current||e.target!==e.currentTarget?ge.current=!1:null==W||W():function(e){e.target===e.currentTarget&&Pe()}(e)},_e=(0,x.useCallback)((function(e){return(0,E.jsx)("div",(0,t.Z)((0,t.Z)({},e),{},{className:l()("".concat(o,"-backdrop"),le,!_&&"show")}))}),[_,le,o]),Oe=(0,t.Z)((0,t.Z)({},i),pe);Oe.display="block";return(0,E.jsx)(C.Z.Provider,{value:Se,children:(0,E.jsx)(g.Z,{show:P,ref:ke,backdrop:z,container:V,keyboard:!0,autoFocus:Q,enforceFocus:Y,restoreFocus:ee,restoreFocusOptions:re,onEscapeKeyDown:function(e){G?null==K||K(e):(e.preventDefault(),"static"===z&&Pe())},onShow:U,onHide:W,onEnter:function(e,r){e&&Re(e),null==ne||ne(e,r)},onEntering:function(e,r){null==te||te(e,r),(0,c.ZP)(window,"resize",Te)},onEntered:oe,onExit:function(e){null==ye.current||ye.current(),null==se||se(e)},onExiting:ae,onExited:function(e){e&&(e.style.display=""),null==ie||ie(e),(0,m.Z)(window,"resize",Te)},manager:Fe(),transition:_?B:void 0,backdropTransition:_?H:void 0,renderBackdrop:_e,renderDialog:function(e){return(0,E.jsx)("div",(0,t.Z)((0,t.Z)({role:"dialog"},e),{},{style:Oe,className:l()(s,o,Ze&&"".concat(o,"-static"),!_&&"show"),onClick:z?De:void 0,onMouseUp:Le,"aria-label":A,"aria-labelledby":R,"aria-describedby":T,children:(0,E.jsx)(S,(0,t.Z)((0,t.Z)({},de),{},{onMouseDown:Ae,className:j,contentClassName:N,children:w}))}))}})})}));q.displayName="Modal";var z=Object.assign(q,{Body:w,Header:P,Title:_,Footer:R,Dialog:F,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},8160:function(e,r,o){e.exports=o.p+"static/media/avtar_5.0b2f30d78064e3e4c6f0.webp"}}]);
//# sourceMappingURL=147.736a9300.chunk.js.map