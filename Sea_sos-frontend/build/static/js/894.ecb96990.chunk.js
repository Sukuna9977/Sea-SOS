"use strict";(self.webpackChunkseasos=self.webpackChunkseasos||[]).push([[894],{8619:(e,s,n)=>{n.d(s,{Z:()=>r});n(2791);var c=n(184);const i=e=>(0,c.jsxs)("div",{className:"card ".concat(e.className?e.className:""),children:[" ",e.children," "]});i.Header=e=>(0,c.jsxs)("div",{className:"card-header d-flex justify-content-between ".concat(e.className?e.className:""),children:[" ",e.children," "]}),i.Body=e=>(0,c.jsxs)("div",{className:"card-body ".concat(e.className?e.className:""),children:[" ",e.children," "]}),i.Footer=e=>(0,c.jsxs)("div",{className:"card-footer",children:[" ",e.children," "]}),i.Header.Title=e=>(0,c.jsxs)("div",{className:"header-title ".concat(e.className?e.className:""),children:[" ",e.children," "]}),i.Header.Action=e=>(0,c.jsxs)("div",{className:"header-action ".concat(e.className?e.className:""),children:[" ",e.children," "]});const r=i},4597:(e,s,n)=>{n.d(s,{Vp:()=>t,j3:()=>l,sD:()=>a});var c=n(1830),i=n.n(c),r=n(1237);const l=(e,s)=>{i().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async n=>{if(n.isConfirmed){const n=await(0,r.SR)(e);s(),i().fire("Deleted!",n.message,"success")}}))},t=e=>{i().fire("Success !",e,"success")},a=e=>{i().fire("Error !",e,"error")}},8830:(e,s,n)=>{n.d(s,{Z:()=>c});const c={BACKEND_URL:{NODE_ENV:"production",PUBLIC_URL:"/hope-ui/react/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL||"http://localhost:3030"}},1237:(e,s,n)=>{n.d(s,{SR:()=>c,rQ:()=>i});const c=async e=>{const s=await fetch(e,{method:"DELETE"});return await s.json()},i=async e=>{const s=await fetch(e);return await s.json()}},215:(e,s,n)=>{n.r(s),n.d(s,{default:()=>C});var c=n(2791),i=n(8619),r=n(5316),l=n(2592),t=n(9743),a=n(2677),d=n(2591),o=n(3360),h=n(1570),A=n(6144),j=n(7612),D=n(6293),x=n(6042),T=n(9961),v=n(7626),g=(n(3666),n(8559)),S=n.n(g);var z=n(8830),m=n(1243),w=n(1237),p=n(184);const y=e=>{let{selectedItem:s,onAssignMission:n,setShowPatrolList:l}=e;const[d,h]=(0,c.useState)(!1),[A,j]=(0,c.useState)(null),[D,x]=(0,c.useState)([]),T={standby:{backgroundColor:"green",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"},on_mission:{backgroundColor:"blue",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"},off_duty:{backgroundColor:"red",width:"10px",height:"10px",borderRadius:"50%",display:"inline-block"}},v=()=>h(!1);(0,c.useEffect)((()=>{(0,w.rQ)("".concat(z.Z.BACKEND_URL,"/api/patrols/"),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then((e=>{x(e)}))}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:(0,p.jsx)(t.Z,{children:(0,p.jsx)(a.Z,{sm:"12",children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(i.Z.Header,{className:"d-flex justify-content-between",children:(0,p.jsx)("div",{className:"header-title",children:(0,p.jsx)("h4",{className:"card-title",children:"Patrol List"})})}),(0,p.jsx)(i.Z.Body,{className:"px-0",children:(0,p.jsx)("div",{className:"table-responsive",children:(0,p.jsxs)("table",{id:"patrol-list-table",className:"table table-striped",role:"grid","data-toggle":"data-table",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"light",children:[(0,p.jsx)("th",{children:"Supervisor Name"}),(0,p.jsx)("th",{children:"Email"}),(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"Location"}),(0,p.jsx)("th",{children:"Team Members"}),(0,p.jsx)("th",{children:"Action"})]})}),(0,p.jsx)("tbody",{children:D.map(((e,s)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.supervisor.name}),(0,p.jsx)("td",{children:e.supervisor.email}),(0,p.jsxs)("td",{children:[(0,p.jsx)("div",{style:T[e.status]}),e.status]}),(0,p.jsx)("td",{children:e.location}),(0,p.jsx)("td",{children:e.teamMembers.join(", ")}),(0,p.jsx)("td",{children:(0,p.jsx)(o.Z,{onClick:()=>{j(e),h(!0)},className:"btn btn-sm btn-primary",children:"Assign"})})]},s)))})]})})})]})})})}),(0,p.jsxs)(r.Z,{show:d,onHide:v,size:"lg",children:[(0,p.jsx)(r.Z.Header,{closeButton:!0,children:(0,p.jsx)(r.Z.Title,{children:"Assign Patrol"})}),(0,p.jsx)(r.Z.Body,{children:A?(0,p.jsxs)("div",{children:[(0,p.jsxs)("h5",{children:["Supervisor Name: ",A.supervisor.name]}),(0,p.jsxs)("p",{children:["Email: ",A.supervisor.email]}),(0,p.jsxs)("p",{children:["Status: ",A.status]}),(0,p.jsxs)("p",{children:["Location: ",A.location]}),(0,p.jsxs)("p",{children:["Team Members: ",A.teamMembers.join(", ")]})]}):(0,p.jsx)("p",{children:"No details available."})}),(0,p.jsxs)(r.Z.Footer,{children:[(0,p.jsx)(o.Z,{variant:"secondary",onClick:v,children:"Close"}),(0,p.jsx)(o.Z,{variant:"primary",onClick:()=>{A&&n&&(n(A._id),v())},children:"Confirm Assignment"})]})]})]})};var O=n(4597);n(2504);const u=e=>{let{refresh:s,markers:n,setMarkers:i}=e;const[t,a]=(0,c.useState)(!1),[d,o]=(0,c.useState)({}),h=(0,D.Sx)(),A=async e=>{try{const s=await m.Z.get("/api/urgences/find-urgence/".concat(e.lng,"/").concat(e.lat),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});console.log("API Response:",s.data),o(s.data)}catch(s){console.error("Failed to fetch urgence data:",s)}};(0,c.useEffect)((()=>{const e=j.io.connect(z.Z.BACKEND_URL);return e.on("notification",(e=>{const n=[e.urgence.longitude,e.urgence.latitude];i((e=>[...e,n])),S().circle(n,{radius:5e3,color:"red"}).addTo(h),s()})),e.on("refresh",(async e=>{await s(),await A(e.data)})),()=>e.disconnect()}),[s,i,h,A]);let T=S().icon({iconUrl:"data:image/png;base64,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",iconSize:[25,41],iconAnchor:[12,41]});return S().Marker.prototype.options.icon=T,(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(r.Z,{show:t,onHide:()=>a(!1),backdrop:"static",keyboard:!1,centered:!0,size:"lg",children:[(0,p.jsx)(r.Z.Header,{closeButton:!0,children:(0,p.jsx)(r.Z.Title,{children:"Urgence"})}),(0,p.jsx)(r.Z.Body,{children:(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[(0,p.jsxs)("div",{style:{backgroundColor:"lightgrey",width:"fit-content",padding:"10px"},children:[(0,p.jsx)("h3",{children:"Latitude"}),(0,p.jsx)("h5",{children:d.longitude}),(0,p.jsx)("h3",{children:"Longitude"}),(0,p.jsx)("h5",{children:d.latitude}),(0,p.jsx)("h5",{children:"Phone number"}),(0,p.jsx)("p",{children:d.tel}),(0,p.jsx)("p",{children:d.nomprenom}),(0,p.jsx)("h5",{children:"Age"}),(0,p.jsx)("p",{children:d.age}),(0,p.jsx)("h5",{children:"Starting point"}),(0,p.jsx)("p",{children:d.depart}),(0,p.jsx)("h5",{children:"Level of emergency"}),(0,p.jsx)("p",{children:d.niveau}),(0,p.jsx)("h5",{children:"Other informations"}),(0,p.jsx)("p",{children:d.other})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h5",{children:"Type of emergency"}),(0,p.jsx)("p",{children:d.type}),(0,p.jsx)("h5",{children:"Boat size"}),(0,p.jsx)("p",{children:d.taille}),(0,p.jsx)("h5",{children:"Number of person"}),(0,p.jsx)("p",{children:d.nbrpersonne}),(0,p.jsx)("h5",{children:"Status"}),(0,p.jsx)("p",{children:d.status}),(0,p.jsx)("h5",{children:"Distance traveled"}),(0,p.jsx)("p",{children:d.distance}),(0,p.jsx)("h5",{children:"Communication"}),(0,p.jsx)("p",{children:d.communication}),(0,p.jsx)("h5",{children:"Police"}),(0,p.jsx)("p",{children:d.police}),(0,p.jsx)(l.Z,{src:"",alt:"Urgence"})]})]})}),(0,p.jsx)(r.Z.Footer,{})]}),n.map(((e,s)=>(0,p.jsx)(x.J,{position:[e[0],e[1]],eventHandlers:{click:e=>(async e=>{"number"===typeof e.lat&&"number"===typeof e.lng?(await A(e),a(!0)):console.error("Invalid latlng:",e)})(e.latlng)}},s)))]})},C=()=>{const[e,s]=(0,c.useState)(!1),[n,l]=(0,c.useState)(null),[j,D]=(0,c.useState)([]),[x,g]=(0,c.useState)(null),[S,w]=(0,c.useState)(null),[C,B]=(0,c.useState)(null),[N,k]=(0,c.useState)("All"),[f,Z]=(0,c.useState)([]),H=()=>{const e=new URLSearchParams;"All"!==N&&e.set("cloture",N),x&&"All"!==x&&e.set("depart",x),S&&"All"!==S&&e.set("status",S),C&&"All"!==C&&e.set("niveau",C),m.Z.get("".concat(z.Z.BACKEND_URL,"/api/urgences/find-all?").concat(e.toString())).then((e=>{console.log("Marker data:",e.data),D(e.data),Z(e.data.map((e=>[e.latitude,e.longitude])))})).catch((e=>{console.error("Error fetching urgences:",e)}))};(0,c.useEffect)((()=>{H()}),[x,S,N,C]);return(0,p.jsxs)("div",{children:[(0,p.jsxs)(t.Z,{children:[(0,p.jsx)(a.Z,{sm:"12",children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(i.Z.Header,{className:"d-flex justify-content-between",children:(0,p.jsx)("h4",{className:"card-title",children:"Map"})}),(0,p.jsx)(i.Z.Body,{children:(0,p.jsxs)(T.h,{center:[36.96021,10.319944],zoom:5,style:{width:"100%",height:"520px"},children:[(0,p.jsx)(v.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,p.jsx)(u,{refresh:H,markers:f,setMarkers:Z})]})})]})}),(0,p.jsx)(a.Z,{sm:"12",children:(0,p.jsxs)(t.Z,{children:[(0,p.jsx)(a.Z,{sm:"8",children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(i.Z.Header,{className:"d-flex justify-content-between",children:(0,p.jsx)("h4",{className:"card-title",children:"SOS"})}),(0,p.jsx)(i.Z.Body,{children:(0,p.jsx)("div",{className:"bd-example table-responsive",children:(0,p.jsxs)(d.Z,{className:"table table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",children:"Lng & lat"}),(0,p.jsx)("th",{scope:"col",children:"Type"}),(0,p.jsx)("th",{scope:"col",children:"Level"}),(0,p.jsx)("th",{scope:"col",children:"Status"}),(0,p.jsx)("th",{scope:"col",children:"Assign"})]})}),(0,p.jsx)("tbody",{children:j.map(((e,n)=>(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[e.longitude,", ",e.latitude]}),(0,p.jsx)("td",{children:e.type}),(0,p.jsx)("td",{children:e.niveau}),(0,p.jsx)("td",{children:e.status}),(0,p.jsx)("td",{children:(0,p.jsx)(o.Z,{onClick:()=>(e=>{l(e),s(!0)})(e),children:"Assign to Patrol"})})]},n)))})]})})})]})}),(0,p.jsx)(a.Z,{sm:"4",children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(i.Z.Header,{className:"d-flex justify-content-between",children:(0,p.jsx)("h4",{className:"card-title",children:"Filters"})}),(0,p.jsx)(i.Z.Body,{children:(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"row filter",children:[(0,p.jsx)("div",{className:"col-sm-4",children:(0,p.jsx)("label",{children:"Emergency starting point:"})}),(0,p.jsx)("div",{className:"col-sm-8",children:(0,p.jsxs)(h.Z,{as:A.Z,children:[(0,p.jsx)(o.Z,{variant:"primary",children:x||"All"}),(0,p.jsx)(h.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,p.jsx)(h.Z.Menu,{children:["All","la Goulette","Rad\xe8s","Sousse","Gab\xe8s","Zarzis","Sfax"].map(((e,s)=>(0,p.jsx)(h.Z.Item,{onClick:()=>g(e),children:e},s)))})]})})]}),(0,p.jsxs)("div",{className:"row filter",children:[(0,p.jsx)("div",{className:"col-sm-4",children:(0,p.jsx)("label",{children:"Emergency level:"})}),(0,p.jsx)("div",{className:"col-sm-8",children:(0,p.jsxs)(h.Z,{as:A.Z,children:[(0,p.jsx)(o.Z,{variant:"primary",children:C||"All"}),(0,p.jsx)(h.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,p.jsx)(h.Z.Menu,{children:["All",1,2,3,4,5].map(((e,s)=>(0,p.jsx)(h.Z.Item,{onClick:()=>B(e),children:e},s)))})]})})]}),(0,p.jsxs)("div",{className:"row filter",children:[(0,p.jsx)("div",{className:"col-sm-4",children:(0,p.jsx)("label",{children:"Emergency status:"})}),(0,p.jsx)("div",{className:"col-sm-8",children:(0,p.jsxs)(h.Z,{as:A.Z,children:[(0,p.jsx)(o.Z,{variant:"primary",children:S||"All"}),(0,p.jsx)(h.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,p.jsx)(h.Z.Menu,{children:["All","Unconscious","Critical condition","Injured","Difficulty breathing","Severe bleeding","Choking","Cardiac arrest","Allergic reaction","Overdose"].map(((e,s)=>(0,p.jsx)(h.Z.Item,{onClick:()=>w(e),children:e},s)))})]})})]}),(0,p.jsxs)("div",{className:"row filter",children:[(0,p.jsx)("div",{className:"col-sm-4",children:(0,p.jsx)("label",{children:"Enclosed:"})}),(0,p.jsx)("div",{className:"col-sm-8",children:(0,p.jsxs)(h.Z,{as:A.Z,children:[(0,p.jsx)(o.Z,{variant:"primary",children:N}),(0,p.jsx)(h.Z.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),(0,p.jsxs)(h.Z.Menu,{children:[(0,p.jsx)(h.Z.Item,{onClick:()=>k("All"),children:"All"}),(0,p.jsx)(h.Z.Item,{onClick:()=>k("open"),children:"open"}),(0,p.jsx)(h.Z.Item,{onClick:()=>k("close"),children:"close"})]})]})})]}),(0,p.jsx)("div",{className:"row filter",children:(0,p.jsx)("div",{className:"col-sm-12 d-flex justify-content-center",children:(0,p.jsx)(o.Z,{onClick:H,children:"Filter"})})})]})})]})})]})})]}),(0,p.jsxs)(r.Z,{show:e,onHide:()=>s(!1),backdrop:"static",keyboard:!1,centered:!0,size:"lg",children:[(0,p.jsx)(r.Z.Header,{closeButton:!0,children:(0,p.jsx)(r.Z.Title,{children:"Assign Patrol"})}),(0,p.jsx)(r.Z.Body,{children:(0,p.jsx)(y,{selectedItem:n,setShowPatrolList:s,onAssignMission:async e=>{if(n)try{200===(await m.Z.post("".concat(z.Z.BACKEND_URL,"/api/patrols/assign/").concat(e,"/").concat(n._id))).status?((0,O.Vp)("Mission assigned successfully!"),s(!1),H()):(0,O.sD)("Failed to assign mission")}catch(c){c.response&&409===c.response.status?(0,O.sD)("This mission has already been assigned to this patrol."):(0,O.sD)("Failed to assign mission"),console.error("Error in assigning mission:",c)}else(0,O.sD)("No mission selected")}})})]}),(0,p.jsx)(t.Z,{children:(0,p.jsx)(a.Z,{children:(0,p.jsx)(i.Z,{})})})]})}}}]);
//# sourceMappingURL=894.ecb96990.chunk.js.map