"use strict";(self.webpackChunkseasos=self.webpackChunkseasos||[]).push([[657],{7411:(e,a,r)=>{r.d(a,{Z:()=>l});var s=r(1243),o=r(8830);const n=s.Z.create({baseURL:o.Z.BACKEND_URL});n.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e)));const l=n},8748:(e,a,r)=>{r.d(a,{OT:()=>d,Xf:()=>c,j3:()=>t,zB:()=>l});var s=r(7411),o=r(4597),n=r(8830);const l=async(e,a)=>{try{const r=await s.Z.post("".concat(n.Z.BACKEND_URL,"/api/auth/login"),{email:e,password:a}),{token:o}=r.data;if(!o)throw new Error("Token not found in response");return localStorage.setItem("token",o),sessionStorage.setItem("token",o),r.data}catch(r){throw console.error("Error signing in:",r),(0,o.sD)("Error signing in"),r}},t=async(e,a)=>{let r={fullname:e.fullname,email:e.email,password:e.password,gender:e.gender,phone:e.phone,address:e.address};try{const n="create"===a?await s.Z.post("/api/users/create",r):await s.Z.put("/api/users/update/".concat(e._id),r,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}},{fullname:e.fullname,gender:e.gender,phone:e.phone,address:e.address});(0,o.Vp)(n.data.message)}catch(n){(0,o.sD)(n.response.data.message)}},d=e=>{s.Z.post(n.Z.BACKEND_URL+"/api/resetpwd/send",{email:e.target.email.value}).then((e=>(0,o.Vp)("We've sent an email, please open your inbox."))).catch((e=>(0,o.sD)(e.response.data.message)))},c=async(e,a)=>(await s.Z.post(n.Z.BACKEND_URL+"/api/resetpwd",{newPassword:e.target.password.value,token:a})).data},2657:(e,a,r)=>{r.r(a),r.d(a,{default:()=>p});var s=r(3063),o=r(2791),n=r(5316),l=r(2592),t=r(4292),d=r(717),c=r(3360),i=r(8160),u=r(8748),m=r(184);const p=e=>{let{refresh:a,handleClose:r,show:p,mode:h,userToEdit:Z}=e;const[f,g]=(0,o.useState)({_id:"",fullname:"",email:"",password:"",gender:"",address:"",phone:""});(0,o.useEffect)((()=>{g(Z||{_id:"",fullname:"",email:"",password:"",gender:"",address:"",phone:""})}),[Z]);const b=e=>{const{name:a,value:r}=e.target;g((e=>(0,s.Z)((0,s.Z)({},e),{},{[a]:r})))};return(0,m.jsx)(n.Z,{show:p,onHide:r,centered:!0,backdrop:"static",keyboard:!1,size:"lg",children:(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await(0,u.j3)(f,h),r(),a()}catch(s){console.error("Error submitting user:",s),alert("Failed to submit user. Check the console for details.")}},children:[(0,m.jsx)(n.Z.Header,{closeButton:!0,children:(0,m.jsx)(n.Z.Title,{children:"create"===h?"Add New User":"Edit User"})}),(0,m.jsx)(n.Z.Body,{children:(0,m.jsxs)("div",{className:"new-user-info",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"profile-img-edit position-relative col-md-2 mb-4",children:(0,m.jsx)(l.Z,{className:"lazyload theme-color-yellow-img profile-pic rounded avatar-100",src:i,alt:"profile-pic"})}),(0,m.jsx)(t.Z,{type:"hidden",name:"_id",value:f._id,readOnly:!0}),(0,m.jsxs)(d.Z.Group,{className:"col-md-10 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"fullname",children:"Full Name:"}),(0,m.jsx)(d.Z.Control,{value:f.fullname,onChange:b,type:"text",id:"fullname",name:"fullname",placeholder:"Full Name",required:!0})]}),(0,m.jsxs)(d.Z.Group,{className:"col-md-6 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"address",children:"Address:"}),(0,m.jsx)(d.Z.Control,{value:f.address,onChange:b,type:"text",name:"address",id:"address",placeholder:"Address",required:!0})]}),(0,m.jsxs)(d.Z.Group,{className:"col-md-6 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"phone",children:"Mobile Number:"}),(0,m.jsx)(d.Z.Control,{value:f.phone,onChange:b,type:"tel",name:"phone",id:"phone",placeholder:"Mobile Number",required:!0})]}),(0,m.jsxs)(d.Z.Group,{className:"col-sm-12 form-group",children:[(0,m.jsx)(d.Z.Label,{children:"Gender:"}),(0,m.jsxs)(d.Z.Control,{as:"select",name:"gender",value:f.gender,onChange:b,required:!0,children:[(0,m.jsx)("option",{value:"",children:"Select gender"}),(0,m.jsx)("option",{value:"MALE",children:"Male"}),(0,m.jsx)("option",{value:"FEMALE",children:"Female"})]})]})]}),"create"===h&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("hr",{}),(0,m.jsx)("h5",{className:"mb-3",children:"Security"}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)(d.Z.Group,{className:"col-md-12 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"email",children:"Email:"}),(0,m.jsx)(d.Z.Control,{value:f.email,onChange:b,type:"email",name:"email",id:"email",placeholder:"Email",required:!0})]}),(0,m.jsxs)(d.Z.Group,{className:"col-md-6 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"password",children:"Password:"}),(0,m.jsx)(d.Z.Control,{value:f.password,onChange:b,type:"password",name:"password",id:"password",placeholder:"Password",required:!0})]}),(0,m.jsxs)(d.Z.Group,{className:"col-md-6 form-group",children:[(0,m.jsx)(d.Z.Label,{htmlFor:"rpass",children:"Repeat Password:"}),(0,m.jsx)(d.Z.Control,{type:"password",id:"rpass",placeholder:"Repeat Password",required:!0})]})]})]})]})}),(0,m.jsxs)(n.Z.Footer,{children:[(0,m.jsx)(c.Z,{type:"submit",variant:"primary",children:"create"===h?"Add New User":"Edit User"}),(0,m.jsx)(c.Z,{type:"button",onClick:r,variant:"secondary",children:"Close"})]})]})})}},2592:(e,a,r)=>{r.d(a,{Z:()=>h});var s=r(3063),o=r(5987),n=r(1694),l=r.n(n),t=r(2791),d=r(2007),c=r.n(d),i=r(162),u=r(184);const m=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(c().string,c().bool,c().bool,c().bool,c().bool,t.forwardRef(((e,a)=>{let{bsPrefix:r,className:n,fluid:t=!1,rounded:d=!1,roundedCircle:c=!1,thumbnail:p=!1}=e,h=(0,o.Z)(e,m);return r=(0,i.vE)(r,"img"),(0,u.jsx)("img",(0,s.Z)((0,s.Z)({ref:a},h),{},{className:l()(n,t&&"".concat(r,"-fluid"),d&&"rounded",c&&"rounded-circle",p&&"".concat(r,"-thumbnail"))}))})));p.displayName="Image";const h=p},5316:(e,a,r)=>{r.d(a,{Z:()=>H});var s,o=r(5987),n=r(3063),l=r(1694),t=r.n(l),d=r(3070),c=r(7357),i=r(8376),u=r(6382);function m(e){if((!s&&0!==s||e)&&c.Z){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),s=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return s}var p=r(8633),h=r(9007),Z=r(3201),f=r(1683),g=r(3690),b=r(2791),x=r(2121),w=r(5592),y=r(2709),N=r(6543);const j=(0,N.Z)("modal-body");var v=r(9820),E=r(162),C=r(184);const k=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],F=b.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,contentClassName:l,centered:d,size:c,fullscreen:i,children:u,scrollable:m}=e,p=(0,o.Z)(e,k);r=(0,E.vE)(r,"modal");const h="".concat(r,"-dialog"),Z="string"===typeof i?"".concat(r,"-fullscreen-").concat(i):"".concat(r,"-fullscreen");return(0,C.jsx)("div",(0,n.Z)((0,n.Z)({},p),{},{ref:a,className:t()(h,s,c&&"".concat(r,"-").concat(c),d&&"".concat(h,"-centered"),m&&"".concat(h,"-scrollable"),i&&Z),children:(0,C.jsx)("div",{className:t()("".concat(r,"-content"),l),children:u})}))}));F.displayName="ModalDialog";const R=F,D=(0,N.Z)("modal-footer");var L=r(8024);const A=["bsPrefix","className","closeLabel","closeButton"],P=b.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,closeLabel:l="Close",closeButton:d=!1}=e,c=(0,o.Z)(e,A);return r=(0,E.vE)(r,"modal-header"),(0,C.jsx)(L.Z,(0,n.Z)((0,n.Z)({ref:a},c),{},{className:t()(s,r),closeLabel:l,closeButton:d}))}));P.displayName="ModalHeader";const S=P;const T=(0,r(7472).Z)("h4"),B=(0,N.Z)("modal-title",{Component:T}),_=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function U(e){return(0,C.jsx)(y.Z,(0,n.Z)((0,n.Z)({},e),{},{timeout:null}))}function M(e){return(0,C.jsx)(y.Z,(0,n.Z)((0,n.Z)({},e),{},{timeout:null}))}const O=b.forwardRef(((e,a)=>{let{bsPrefix:r,className:s,style:l,dialogClassName:y,contentClassName:N,children:j,dialogAs:k=R,"aria-labelledby":F,"aria-describedby":D,"aria-label":L,show:A=!1,animation:P=!0,backdrop:S=!0,keyboard:T=!0,onEscapeKeyDown:B,onShow:O,onHide:H,container:I,autoFocus:z=!0,enforceFocus:q=!0,restoreFocus:G=!0,restoreFocusOptions:K,onEntered:W,onExit:V,onExiting:X,onEnter:J,onEntering:Q,onExited:Y,backdropClassName:$,manager:ee}=e,ae=(0,o.Z)(e,_);const[re,se]=(0,b.useState)({}),[oe,ne]=(0,b.useState)(!1),le=(0,b.useRef)(!1),te=(0,b.useRef)(!1),de=(0,b.useRef)(null),[ce,ie]=(0,p.Z)(),ue=(0,Z.Z)(a,ie),me=(0,h.Z)(H),pe=(0,E.SC)();r=(0,E.vE)(r,"modal");const he=(0,b.useMemo)((()=>({onHide:me})),[me]);function Ze(){return ee||(0,w.t)({isRTL:pe})}function fe(e){if(!c.Z)return;const a=Ze().getScrollbarWidth()>0,r=e.scrollHeight>(0,i.Z)(e).documentElement.clientHeight;se({paddingRight:a&&!r?m():void 0,paddingLeft:!a&&r?m():void 0})}const ge=(0,h.Z)((()=>{ce&&fe(ce.dialog)}));(0,f.Z)((()=>{(0,u.Z)(window,"resize",ge),null==de.current||de.current()}));const be=()=>{le.current=!0},xe=e=>{le.current&&ce&&e.target===ce.dialog&&(te.current=!0),le.current=!1},we=()=>{ne(!0),de.current=(0,g.Z)(ce.dialog,(()=>{ne(!1)}))},ye=e=>{"static"!==S?te.current||e.target!==e.currentTarget?te.current=!1:null==H||H():(e=>{e.target===e.currentTarget&&we()})(e)},Ne=(0,b.useCallback)((e=>(0,C.jsx)("div",(0,n.Z)((0,n.Z)({},e),{},{className:t()("".concat(r,"-backdrop"),$,!P&&"show")}))),[P,$,r]),je=(0,n.Z)((0,n.Z)({},l),re);je.display="block";return(0,C.jsx)(v.Z.Provider,{value:he,children:(0,C.jsx)(x.Z,{show:A,ref:ue,backdrop:S,container:I,keyboard:!0,autoFocus:z,enforceFocus:q,restoreFocus:G,restoreFocusOptions:K,onEscapeKeyDown:e=>{T?null==B||B(e):(e.preventDefault(),"static"===S&&we())},onShow:O,onHide:H,onEnter:(e,a)=>{e&&fe(e),null==J||J(e,a)},onEntering:(e,a)=>{null==Q||Q(e,a),(0,d.ZP)(window,"resize",ge)},onEntered:W,onExit:e=>{null==de.current||de.current(),null==V||V(e)},onExiting:X,onExited:e=>{e&&(e.style.display=""),null==Y||Y(e),(0,u.Z)(window,"resize",ge)},manager:Ze(),transition:P?U:void 0,backdropTransition:P?M:void 0,renderBackdrop:Ne,renderDialog:e=>(0,C.jsx)("div",(0,n.Z)((0,n.Z)({role:"dialog"},e),{},{style:je,className:t()(s,r,oe&&"".concat(r,"-static"),!P&&"show"),onClick:S?ye:void 0,onMouseUp:xe,"aria-label":L,"aria-labelledby":F,"aria-describedby":D,children:(0,C.jsx)(k,(0,n.Z)((0,n.Z)({},ae),{},{onMouseDown:be,className:y,contentClassName:N,children:j}))}))})})}));O.displayName="Modal";const H=Object.assign(O,{Body:j,Header:S,Title:B,Footer:D,Dialog:R,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},8160:(e,a,r)=>{e.exports=r.p+"static/media/avtar_5.0b2f30d78064e3e4c6f0.webp"}}]);
//# sourceMappingURL=657.d41cd62b.chunk.js.map