"use strict";(self.webpackChunkseasos=self.webpackChunkseasos||[]).push([[147],{7411:(e,s,o)=>{o.d(s,{Z:()=>n});var r=o(1243),a=o(8830);const t=r.Z.create({baseURL:a.Z.BACKEND_URL});t.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e)));const n=t},5147:(e,s,o)=>{o.r(s),o.d(s,{default:()=>v});var r=o(3063),a=o(2791),t=o(5316),n=o(2592),i=o(4292),l=o(717),c=o(3360),d=o(8160),u=o(7411),m=o(4597);o(8830);var p=o(184);const v=e=>{var s,o,v,h;let{refresh:b,handleClose:Z,handleShow:x,show:f,mode:g,patrolToEdit:y}=e;const[j,N]=(0,a.useState)({_id:y._id||"",supervisor:{name:(null===(s=y.supervisor)||void 0===s?void 0:s.name)||"",email:(null===(o=y.supervisor)||void 0===o?void 0:o.email)||"",password:(null===(v=y.supervisor)||void 0===v?void 0:v.password)||"",rank:(null===(h=y.supervisor)||void 0===h?void 0:h.rank)||""},status:y.status||"",location:y.location||"",teamMembers:Array.isArray(y.teamMembers)?y.teamMembers.join(", "):y.teamMembers||"",assignedMissions:y.assignedMissions||[]}),w=e=>{const{name:s,value:o}=e.target;s.startsWith("supervisor.")?N((e=>(0,r.Z)((0,r.Z)({},e),{},{supervisor:(0,r.Z)((0,r.Z)({},e.supervisor),{},{[s.split(".")[1]]:o})}))):N((0,r.Z)((0,r.Z)({},j),{},{[s]:o}))};return(0,a.useEffect)((()=>{var e,s,o,r;N({_id:y._id||"",supervisor:{name:(null===(e=y.supervisor)||void 0===e?void 0:e.name)||"",email:(null===(s=y.supervisor)||void 0===s?void 0:s.email)||"",password:(null===(o=y.supervisor)||void 0===o?void 0:o.password)||"",rank:(null===(r=y.supervisor)||void 0===r?void 0:r.rank)||""},status:y.status||"",location:y.location||"",teamMembers:Array.isArray(y.teamMembers)?y.teamMembers.join(", "):y.teamMembers||"",assignedMissions:y.assignedMissions||[]})}),[y]),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{children:(0,p.jsx)(t.Z,{show:f,onHide:Z,centered:!0,backdrop:"static",keyboard:!1,size:"lg",children:(0,p.jsxs)("form",{encType:"multipart/form-data",onSubmit:async e=>{e.preventDefault();const s=(0,r.Z)((0,r.Z)({},j),{},{teamMembers:j.teamMembers.split(",").map((e=>e.trim()))});await(async(e,s)=>{console.log("submit button called  ");let o={supervisor:e.supervisor,status:e.status,location:e.location,teamMembers:Array.isArray(e.teamMembers)?e.teamMembers:e.teamMembers.split(",").map((e=>e.trim())),assignedMissions:e.assignedMissions};try{console.log("Received data:",e);const r="create"===s?await u.Z.post("/api/patrols/create",o):await u.Z.put("/api/patrols/update/".concat(e._id),o);(0,m.Vp)(r.data.message)}catch(r){(0,m.sD)(r.response.data.message)}})(s,g),Z(),b()},children:[(0,p.jsx)(t.Z.Header,{closeButton:!0,children:"create"===g?(0,p.jsx)(t.Z.Title,{children:"Add new patrol"}):(0,p.jsx)(t.Z.Title,{children:"Edit patrol"})}),(0,p.jsx)(t.Z.Body,{children:(0,p.jsx)("div",{className:"new-patrol-info",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"profile-img-edit position-relative col-md-2 mb-4",children:(0,p.jsx)(n.Z,{className:"lazyload theme-color-yellow-img profile-pic rounded avatar-100",src:d,alt:"profile-pic"})}),(0,p.jsx)(i.Z,{type:"hidden",name:"_id",value:j._id,onChange:w}),(0,p.jsxs)(l.Z.Group,{className:"col-md-10 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"supervisorName",children:"Supervisor Name:"}),(0,p.jsx)(l.Z.Control,{value:j.supervisor.name,onChange:w,type:"text",id:"supervisorName",name:"supervisor.name",placeholder:"Supervisor Name",required:!0})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-6 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"supervisorEmail",children:"Supervisor Email:"}),(0,p.jsx)(l.Z.Control,{value:j.supervisor.email,onChange:w,type:"email",name:"supervisor.email",id:"supervisorEmail",placeholder:"Supervisor Email",required:!0})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-6 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"supervisorPassword",children:"Supervisor Password:"}),(0,p.jsx)(l.Z.Control,{type:"password",value:j.supervisor.password,onChange:w,name:"supervisor.password",id:"supervisorPassword",placeholder:"Supervisor Password",required:!0})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-6 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"supervisorRank",children:"Supervisor Rank:"}),(0,p.jsx)(l.Z.Control,{value:j.supervisor.rank,onChange:w,type:"text",name:"supervisor.rank",id:"supervisorRank",placeholder:"Supervisor Rank",required:!0})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-6 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"status",children:"Status:"}),(0,p.jsxs)("select",{name:"status",value:j.status,onChange:w,id:"status",className:"selectpicker form-control","data-style":"py-0",required:!0,children:[(0,p.jsx)("option",{value:"",children:"Select status"}),(0,p.jsx)("option",{value:"standby",children:"Standby"}),(0,p.jsx)("option",{value:"on_mission",children:"On Mission"}),(0,p.jsx)("option",{value:"off_duty",children:"Off Duty"})]})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-12 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"location",children:"Location:"}),(0,p.jsx)(l.Z.Control,{value:j.location,onChange:w,type:"text",name:"location",id:"location",placeholder:"Location",required:!0})]}),(0,p.jsxs)(l.Z.Group,{className:"col-md-12 form-group",children:[(0,p.jsx)(l.Z.Label,{htmlFor:"teamMembers",children:"Team Members:"}),(0,p.jsx)(l.Z.Control,{value:j.teamMembers,onChange:w,type:"text",name:"teamMembers",id:"teamMembers",placeholder:"Team Members (comma-separated)",required:!0})]})]})})}),(0,p.jsxs)(t.Z.Footer,{children:[(0,p.jsx)(c.Z,{type:"button",variant:"secondary",onClick:Z,children:"Close"}),(0,p.jsx)(c.Z,{type:"submit",variant:"primary",children:"Save Changes"})]})]})})})})}},2592:(e,s,o)=>{o.d(s,{Z:()=>v});var r=o(3063),a=o(5987),t=o(1694),n=o.n(t),i=o(2791),l=o(2007),c=o.n(l),d=o(162),u=o(184);const m=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(c().string,c().bool,c().bool,c().bool,c().bool,i.forwardRef(((e,s)=>{let{bsPrefix:o,className:t,fluid:i=!1,rounded:l=!1,roundedCircle:c=!1,thumbnail:p=!1}=e,v=(0,a.Z)(e,m);return o=(0,d.vE)(o,"img"),(0,u.jsx)("img",(0,r.Z)((0,r.Z)({ref:s},v),{},{className:n()(t,i&&"".concat(o,"-fluid"),l&&"rounded",c&&"rounded-circle",p&&"".concat(o,"-thumbnail"))}))})));p.displayName="Image";const v=p},5316:(e,s,o)=>{o.d(s,{Z:()=>q});var r,a=o(5987),t=o(3063),n=o(1694),i=o.n(n),l=o(3070),c=o(7357),d=o(8376),u=o(6382);function m(e){if((!r&&0!==r||e)&&c.Z){var s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="50px",s.style.height="50px",s.style.overflow="scroll",document.body.appendChild(s),r=s.offsetWidth-s.clientWidth,document.body.removeChild(s)}return r}var p=o(8633),v=o(9007),h=o(3201),b=o(1683),Z=o(3690),x=o(2791),f=o(2121),g=o(5592),y=o(2709),j=o(6543);const N=(0,j.Z)("modal-body");var w=o(9820),C=o(162),E=o(184);const k=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],M=x.forwardRef(((e,s)=>{let{bsPrefix:o,className:r,contentClassName:n,centered:l,size:c,fullscreen:d,children:u,scrollable:m}=e,p=(0,a.Z)(e,k);o=(0,C.vE)(o,"modal");const v="".concat(o,"-dialog"),h="string"===typeof d?"".concat(o,"-fullscreen-").concat(d):"".concat(o,"-fullscreen");return(0,E.jsx)("div",(0,t.Z)((0,t.Z)({},p),{},{ref:s,className:i()(v,r,c&&"".concat(o,"-").concat(c),l&&"".concat(v,"-centered"),m&&"".concat(v,"-scrollable"),d&&h),children:(0,E.jsx)("div",{className:i()("".concat(o,"-content"),n),children:u})}))}));M.displayName="ModalDialog";const S=M,F=(0,j.Z)("modal-footer");var R=o(8024);const T=["bsPrefix","className","closeLabel","closeButton"],A=x.forwardRef(((e,s)=>{let{bsPrefix:o,className:r,closeLabel:n="Close",closeButton:l=!1}=e,c=(0,a.Z)(e,T);return o=(0,C.vE)(o,"modal-header"),(0,E.jsx)(R.Z,(0,t.Z)((0,t.Z)({ref:s},c),{},{className:i()(r,o),closeLabel:n,closeButton:l}))}));A.displayName="ModalHeader";const L=A;const P=(0,o(7472).Z)("h4"),D=(0,j.Z)("modal-title",{Component:P}),_=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function O(e){return(0,E.jsx)(y.Z,(0,t.Z)((0,t.Z)({},e),{},{timeout:null}))}function B(e){return(0,E.jsx)(y.Z,(0,t.Z)((0,t.Z)({},e),{},{timeout:null}))}const H=x.forwardRef(((e,s)=>{let{bsPrefix:o,className:r,style:n,dialogClassName:y,contentClassName:j,children:N,dialogAs:k=S,"aria-labelledby":M,"aria-describedby":F,"aria-label":R,show:T=!1,animation:A=!0,backdrop:L=!0,keyboard:P=!0,onEscapeKeyDown:D,onShow:H,onHide:q,container:z,autoFocus:I=!0,enforceFocus:G=!0,restoreFocus:K=!0,restoreFocusOptions:U,onEntered:W,onExit:V,onExiting:J,onEnter:Q,onEntering:X,onExited:Y,backdropClassName:$,manager:ee}=e,se=(0,a.Z)(e,_);const[oe,re]=(0,x.useState)({}),[ae,te]=(0,x.useState)(!1),ne=(0,x.useRef)(!1),ie=(0,x.useRef)(!1),le=(0,x.useRef)(null),[ce,de]=(0,p.Z)(),ue=(0,h.Z)(s,de),me=(0,v.Z)(q),pe=(0,C.SC)();o=(0,C.vE)(o,"modal");const ve=(0,x.useMemo)((()=>({onHide:me})),[me]);function he(){return ee||(0,g.t)({isRTL:pe})}function be(e){if(!c.Z)return;const s=he().getScrollbarWidth()>0,o=e.scrollHeight>(0,d.Z)(e).documentElement.clientHeight;re({paddingRight:s&&!o?m():void 0,paddingLeft:!s&&o?m():void 0})}const Ze=(0,v.Z)((()=>{ce&&be(ce.dialog)}));(0,b.Z)((()=>{(0,u.Z)(window,"resize",Ze),null==le.current||le.current()}));const xe=()=>{ne.current=!0},fe=e=>{ne.current&&ce&&e.target===ce.dialog&&(ie.current=!0),ne.current=!1},ge=()=>{te(!0),le.current=(0,Z.Z)(ce.dialog,(()=>{te(!1)}))},ye=e=>{"static"!==L?ie.current||e.target!==e.currentTarget?ie.current=!1:null==q||q():(e=>{e.target===e.currentTarget&&ge()})(e)},je=(0,x.useCallback)((e=>(0,E.jsx)("div",(0,t.Z)((0,t.Z)({},e),{},{className:i()("".concat(o,"-backdrop"),$,!A&&"show")}))),[A,$,o]),Ne=(0,t.Z)((0,t.Z)({},n),oe);Ne.display="block";return(0,E.jsx)(w.Z.Provider,{value:ve,children:(0,E.jsx)(f.Z,{show:T,ref:ue,backdrop:L,container:z,keyboard:!0,autoFocus:I,enforceFocus:G,restoreFocus:K,restoreFocusOptions:U,onEscapeKeyDown:e=>{P?null==D||D(e):(e.preventDefault(),"static"===L&&ge())},onShow:H,onHide:q,onEnter:(e,s)=>{e&&be(e),null==Q||Q(e,s)},onEntering:(e,s)=>{null==X||X(e,s),(0,l.ZP)(window,"resize",Ze)},onEntered:W,onExit:e=>{null==le.current||le.current(),null==V||V(e)},onExiting:J,onExited:e=>{e&&(e.style.display=""),null==Y||Y(e),(0,u.Z)(window,"resize",Ze)},manager:he(),transition:A?O:void 0,backdropTransition:A?B:void 0,renderBackdrop:je,renderDialog:e=>(0,E.jsx)("div",(0,t.Z)((0,t.Z)({role:"dialog"},e),{},{style:Ne,className:i()(r,o,ae&&"".concat(o,"-static"),!A&&"show"),onClick:L?ye:void 0,onMouseUp:fe,"aria-label":R,"aria-labelledby":M,"aria-describedby":F,children:(0,E.jsx)(k,(0,t.Z)((0,t.Z)({},se),{},{onMouseDown:xe,className:y,contentClassName:j,children:N}))}))})})}));H.displayName="Modal";const q=Object.assign(H,{Body:N,Header:L,Title:D,Footer:F,Dialog:S,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},8160:(e,s,o)=>{e.exports=o.p+"static/media/avtar_5.0b2f30d78064e3e4c6f0.webp"}}]);
//# sourceMappingURL=147.d67ab50c.chunk.js.map